import java.io.ByteArrayOutputStream;
import java.io.PrintStream;
import java.io.IOException;
import realtimeweb.earthquakeservice.exceptions.EarthquakeException;
import realtimeweb.earthquakewatchers.WatcherParseException;

/**
 * Tests all logic within class EqSpatial.
 *
 * @author Quinn Liu (quinnliu@vt.edu)
 * @version Oct 15, 2013
 */
public class EqSpatialTest extends student.TestCase {
    private final ByteArrayOutputStream outContent = new ByteArrayOutputStream();

    public void setUp() {
	new EqSpatial();

	// set up stream to test strings printed out to the console
	System.setOut(new PrintStream(this.outContent));
    }

    /**
     * Test different outputs to console.
     *
     * @throws IOException
     * @throws WatcherParseException
     * @throws EarthquakeException
     */
    public void test_main() throws IOException, WatcherParseException,
	    EarthquakeException {
	String[] args = { "Wsmall2.txt", "EQsmallP2.json" };

	EqSpatial.main(args);
	assertFuzzyEquals(
		"E"
			+ "\nRiley -105.7 -24.3 is added to the BST"
			+ "\nRiley -105.7 -24.3 is added to the bintree"
			+ "\nEarthquake inserted at 69.29 29.65"
			+ "\n74.0km from SSW of Fort Manro, Punjab is close to the following watchers:"
			+ "\nWatcher search caused 1 bintree nodes to be visited."
			+ "\nTaylor 21.2 -38.6 is added to the BST"
			+ "\nTaylor 21.2 -38.6 is added to the bintree"
			+ "\nRiley -105.7 -24.3"
			+ "\n..Taylor 21.2 -38.6"
			+ "\nI"
			+ "\nRiley -105.7 -24.3"
			+ "\nTaylor 21.2 -38.6"
			+ "\nEarthquake inserted at -106.66 -58.3"
			+ "\n2450.0km from ENE of Byrd (S.R.I.), Marie Byrd Land is close to the following watchers:"
			+ "\nWatcher search caused 2 bintree nodes to be visited."
			+ "\nEarthquake inserted at 51.79 28.93"
			+ "\n49.0km from N of AHRAM, Iran is close to the following watchers:"
			+ "\nWatcher search caused 2 bintree nodes to be visited."
			+ "\nEarthquake inserted at 80.46 8.25"
			+ "\n19.0km from WSW of Mahakanadarawa, Sri Lanka is close to the following watchers:"
			+ "\nTaylor 21.2 -38.6"
			+ "\nWatcher search caused 3 bintree nodes to be visited."
			+ "\nLargest earthquake in past 6 hours:"
			+ "\nMagnitude 4.4 at 19.0km from WSW of Mahakanadarawa, Sri Lanka"
			+ "\nNevaeh -11.0 63.1 is added to the BST"
			+ "\nNevaeh -11.0 63.1 is added to the bintree"
			+ "\nEarthquake inserted at 103.75 24.04"
			+ "\n158.0km from NW of Kunming, Yunnan is close to the following watchers:"
			+ "\nNevaeh -11.0 63.1"
			+ "\nTaylor 21.2 -38.6"
			+ "\nWatcher search caused 5 bintree nodes to be visited."
			+ "\nDominic -79.2 37.3 is added to the BST"
			+ "\nDominic -79.2 37.3 is added to the bintree"
			+ "\nTaylor duplicates a watcher already in the BST"
			+ "\nEarthquake inserted at -128.36 87.77"
			+ "\n1284.0km from E of Mould Bay, Northwest Territories is close to the following watchers:"
			+ "\nWatcher search caused 4 bintree nodes to be visited."
			+ "\nEarthquake inserted at 142.01 82.71"
			+ "\n1482.0km from E of Deputatskiy, Sakha is close to the following watchers:"
			+ "\nWatcher search caused 2 bintree nodes to be visited."
			+ "\nTristan -117.1 5.0 is added to the BST"
			+ "\nTristan -117.1 5.0 is added to the bintree"
			+ "\nSean -105.7 -24.3 is added to the BST"
			+ "\n-105.7 -24.3 duplicates a watcher already in the bintree"
			+ "\nSean is removed from the BST"
			+ "\nTaylor 21.2 -38.6 is removed from the BST"
			+ "\nTaylor 21.2 -38.6 is removed from the bintree"
			+ "\nEarthquake inserted at -35.55 15.93"
			+ "\n1170.0km from SSE of Brava--Cachaco, Cape Verde Islands is close to the following watchers:"
			+ "\nRiley -105.7 -24.3"
			+ "\nTristan -117.1 5.0"
			+ "\nDominic -79.2 37.3"
			+ "\nNevaeh -11.0 63.1"
			+ "\nWatcher search caused 9 bintree nodes to be visited."
			+ "\nEarthquake inserted at 16.69 -78.89"
			+ "\n913.0km from W of N'lazarevskaya, Dronning Maud Land is close to the following watchers:"
			+ "\nRiley -105.7 -24.3"
			+ "\nTristan -117.1 5.0"
			+ "\nDominic -79.2 37.3"
			+ "\nNevaeh -11.0 63.1"
			+ "\nWatcher search caused 9 bintree nodes to be visited."
			+ "\nEarthquake inserted at 108.7 -85.27"
			+ "\n525.0km from E of South Pole, Antarctica is close to the following watchers:"
			+ "\nWatcher search caused 2 bintree nodes to be visited."
			+ "\n....Dominic -79.2 37.3"
			+ "\n..Nevaeh -11.0 63.1"
			+ "\nRiley -105.7 -24.3"
			+ "\n..Tristan -117.1 5.0"
			+ "\nI"
			+ "\nI"
			+ "\nRiley -105.7 -24.3"
			+ "\nI"
			+ "\nTristan -117.1 5.0"
			+ "\nI"
			+ "\nDominic -79.2 37.3"
			+ "\nNevaeh -11.0 63.1"
			+ "\nE"
			+ "\nEarthquake inserted at -16.94 -31.86"
			+ "\n718.0km from ESE of TRISTAN DA CUNHA T-PHASE SITE N1, Tristan da Cunha is close to the following watchers:"
			+ "\nWatcher search caused 3 bintree nodes to be visited."
			+ "\nEarthquake inserted at 140.04 -25.95"
			+ "\n211.0km from ESE of Innaminka, South Australia is close to the following watchers:"
			+ "\nRiley -105.7 -24.3"
			+ "\nTristan -117.1 5.0"
			+ "\nDominic -79.2 37.3"
			+ "\nNevaeh -11.0 63.1"
			+ "\nWatcher search caused 9 bintree nodes to be visited."
			+ "\nEarthquake inserted at -161.51 -55.96"
			+ "\n1708.0km from WNW of CHATHAM INFRASONIC ARRAY REFERENCE POINT, Chatham Islands is close to the following watchers:"
			+ "\nWatcher search caused 3 bintree nodes to be visited."
			+ "\nAlexa -50.2 88.4 is added to the BST"
			+ "\nAlexa -50.2 88.4 is added to the bintree"
			+ "\nEarthquake inserted at 120.62 -20.34"
			+ "\n123.0km from NE of Marble Bar, Western Australia is close to the following watchers:"
			+ "\nRiley -105.7 -24.3"
			+ "\nDominic -79.2 37.3"
			+ "\nAlexa -50.2 88.4"
			+ "\nNevaeh -11.0 63.1"
			+ "\nWatcher search caused 11 bintree nodes to be visited."
			+ "\nEarthquake inserted at 40.08 -66.99"
			+ "\n225.0km from E of Syowa Base, Dronning Maud Land is close to the following watchers:"
			+ "\nRiley -105.7 -24.3"
			+ "\nDominic -79.2 37.3"
			+ "\nNevaeh -11.0 63.1"
			+ "\nWatcher search caused 11 bintree nodes to be visited."
			+ "\nEarthquake inserted at -67.23 89.99"
			+ "\n832.0km from E of Alert, Northwest Territories is close to the following watchers:"
			+ "\nDominic -79.2 37.3"
			+ "\nAlexa -50.2 88.4"
			+ "\nNevaeh -11.0 63.1"
			+ "\nWatcher search caused 11 bintree nodes to be visited."
			+ "\nEarthquake inserted at 83.66 2.96"
			+ "\n480.0km from NW of Hakmana, Sri Lanka is close to the following watchers:"
			+ "\nWatcher search caused 2 bintree nodes to be visited."
			+ "\nEarthquake inserted at -178.48 -31.63"
			+ "\n269.0km from WSW of Green Lake, Kermadec Islands is close to the following watchers:"
			+ "\nWatcher search caused 3 bintree nodes to be visited."
			+ "\nEarthquake inserted at 117.12 -9.72"
			+ "\n112.0km from W of Taliwang, Sumbawa, Sumba is close to the following watchers:"
			+ "\nWatcher search caused 2 bintree nodes to be visited."
			+ "\nEarthquake inserted at -168.94 -14.04"
			+ "\n306.0km from N of Afiamalu, Samoa Islands is close to the following watchers:"
			+ "\nRiley -105.7 -24.3"
			+ "\nTristan -117.1 5.0"
			+ "\nWatcher search caused 9 bintree nodes to be visited."
			+ "\n......Alexa -50.2 88.4"
			+ "\n....Dominic -79.2 37.3"
			+ "\n..Nevaeh -11.0 63.1"
			+ "\nRiley -105.7 -24.3"
			+ "\n..Tristan -117.1 5.0"
			+ "\nI"
			+ "\nI"
			+ "\nRiley -105.7 -24.3"
			+ "\nI"
			+ "\nTristan -117.1 5.0"
			+ "\nI"
			+ "\nDominic -79.2 37.3"
			+ "\nI"
			+ "\nAlexa -50.2 88.4"
			+ "\nNevaeh -11.0 63.1"
			+ "\nE"
			+ "\nEarthquake inserted at -34.34 53.75"
			+ "\n1324.0km from W of Kulusuk, Greenland, Greenland is close to the following watchers:"
			+ "\nWatcher search caused 6 bintree nodes to be visited."
			+ "\nJohn 10.7 -80.4 is added to the BST"
			+ "\nJohn 10.7 -80.4 is added to the bintree"
			+ "\nNotexist does not appear in the BST"
			+ "\nEarthquake inserted at 31.32 -53.35"
			+ "\n851.0km from SW of Marion Island, Prince Edward Islands is close to the following watchers:"
			+ "\nNevaeh -11.0 63.1"
			+ "\nJohn 10.7 -80.4"
			+ "\nWatcher search caused 11 bintree nodes to be visited."
			+ "\nPenny 55.3 -80.3 is added to the BST"
			+ "\nPenny 55.3 -80.3 is added to the bintree"
			+ "\nEarthquake inserted at 50.79 -45.96"
			+ "\n80.0km from SSE of CROZET ISLANDS HYDROACOUSTIC SITE N1, Crozet Islands is close to the following watchers:"
			+ "\nJohn 10.7 -80.4"
			+ "\nPenny 55.3 -80.3"
			+ "\nWatcher search caused 18 bintree nodes to be visited."
			+ "\n......Alexa -50.2 88.4"
			+ "\n....Dominic -79.2 37.3"
			+ "\n......John 10.7 -80.4"
			+ "\n..Nevaeh -11.0 63.1"
			+ "\n....Penny 55.3 -80.3"
			+ "\nRiley -105.7 -24.3"
			+ "\n..Tristan -117.1 5.0"
			+ "\nI"
			+ "\nI"
			+ "\nRiley -105.7 -24.3"
			+ "\nI"
			+ "\nTristan -117.1 5.0"
			+ "\nI"
			+ "\nDominic -79.2 37.3"
			+ "\nI"
			+ "\nAlexa -50.2 88.4"
			+ "\nNevaeh -11.0 63.1"
			+ "\nI"
			+ "\nI"
			+ "\nI"
			+ "\nI"
			+ "\nJohn 10.7 -80.4"
			+ "\nPenny 55.3 -80.3"
			+ "\nE"
			+ "\nE"
			+ "\nE"
			+ "\nEarthquake inserted at 62.92 -58.72"
			+ "\n988.0km from E of Mawson, Mac Robertson Land is close to the following watchers:"
			+ "\nNevaeh -11.0 63.1"
			+ "\nJohn 10.7 -80.4"
			+ "\nPenny 55.3 -80.3"
			+ "\nWatcher search caused 19 bintree nodes to be visited."
			+ "\nEarthquake inserted at 139.72 24.71"
			+ "\n161.0km from S of Iwo jima, Bonin Islands is close to the following watchers:"
			+ "\nWatcher search caused 3 bintree nodes to be visited."
			+ "\nJohn 10.7 -80.4 is removed from the BST"
			+ "\nJohn 10.7 -80.4 is removed from the bintree"
			+ "\n......Alexa -50.2 88.4"
			+ "\n....Dominic -79.2 37.3"
			+ "\n..Nevaeh -11.0 63.1"
			+ "\n....Penny 55.3 -80.3"
			+ "\nRiley -105.7 -24.3"
			+ "\n..Tristan -117.1 5.0"
			+ "\nI"
			+ "\nI"
			+ "\nRiley -105.7 -24.3"
			+ "\nI"
			+ "\nTristan -117.1 5.0"
			+ "\nI"
			+ "\nDominic -79.2 37.3"
			+ "\nI"
			+ "\nAlexa -50.2 88.4"
			+ "\nNevaeh -11.0 63.1"
			+ "\nPenny 55.3 -80.3"
			+ "\nEarthquake inserted at -38.95 -18.5"
			+ "\n177.0km from NNE of Linhares ES, Espirito Santo is close to the following watchers:"
			+ "\nRiley -105.7 -24.3"
			+ "\nTristan -117.1 5.0"
			+ "\nDominic -79.2 37.3"
			+ "\nNevaeh -11.0 63.1"
			+ "\nWatcher search caused 11 bintree nodes to be visited."
			+ "\nNevaeh -11.0 63.1 is removed from the BST"
			+ "\nNevaeh -11.0 63.1 is removed from the bintree"
			+ "\n....Alexa -50.2 88.4"
			+ "\n..Dominic -79.2 37.3"
			+ "\n....Penny 55.3 -80.3"
			+ "\nRiley -105.7 -24.3"
			+ "\n..Tristan -117.1 5.0"
			+ "\nI"
			+ "\nI"
			+ "\nRiley -105.7 -24.3"
			+ "\nI"
			+ "\nTristan -117.1 5.0"
			+ "\nI"
			+ "\nDominic -79.2 37.3"
			+ "\nAlexa -50.2 88.4"
			+ "\nPenny 55.3 -80.3"
			+ "\nEarthquake inserted at -156.22 25.95"
			+ "\n508.0km from ENE of Opana, Hawaii is close to the following watchers:"
			+ "\nRiley -105.7 -24.3"
			+ "\nTristan -117.1 5.0"
			+ "\nDominic -79.2 37.3"
			+ "\nAlexa -50.2 88.4"
			+ "\nPenny 55.3 -80.3"
			+ "\nWatcher search caused 9 bintree nodes to be visited."
			+ "\nEarthquake inserted at 68.97 26.61"
			+ "\n160.0km from ESE of Umerkot, Pakistan is close to the following watchers:"
			+ "\nRiley -105.7 -24.3"
			+ "\nTristan -117.1 5.0"
			+ "\nDominic -79.2 37.3"
			+ "\nAlexa -50.2 88.4"
			+ "\nPenny 55.3 -80.3"
			+ "\nWatcher search caused 9 bintree nodes to be visited."
			+ "\nRiley -105.7 -24.3 is removed from the BST"
			+ "\nRiley -105.7 -24.3 is removed from the bintree"
			+ "\nDominic -79.2 37.3 is removed from the BST"
			+ "\nDominic -79.2 37.3 is removed from the bintree"
			+ "\nTristan -117.1 5.0 is removed from the BST"
			+ "\nTristan -117.1 5.0 is removed from the bintree"
			+ "\nEarthquake inserted at 114.68 46.03"
			+ "\n443.0km from WNW of Khapcheranga, Buryatiya is close to the following watchers:"
			+ "\nWatcher search caused 2 bintree nodes to be visited."
			+ "\nEarthquake inserted at -56.2 -73.11"
			+ "\n1080.0km from W of Base Esperanza, Antarctic Peninsula is close to the following watchers:"
			+ "\nWatcher search caused 2 bintree nodes to be visited."
			+ "\nEarthquake inserted at -94.57 17.33"
			+ "\n43.0km from NE of Matias Romero, Oaxaca is close to the following watchers:"
			+ "\nWatcher search caused 2 bintree nodes to be visited."
			+ "\nAlexa -50.2 88.4 is removed from the BST"
			+ "\nAlexa -50.2 88.4 is removed from the bintree"
			+ "\nPenny 55.3 -80.3" + "\nPenny 55.3 -80.3"
			+ "\nPenny 55.3 -80.3 is removed from the BST"
			+ "\nPenny 55.3 -80.3 is removed from the bintree"
			+ "\nE", this.outContent.toString());
    }
}
